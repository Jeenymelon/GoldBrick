auto.waitFor();
log("ğŸš€ å¯åŠ¨ GoldBrick 2.1 - éšæœºé˜²æ‰“å‡»ç‰ˆ");

// ==========================================
// 1. é…ç½®åŒºï¼šè®¾ç½®éšæœºå»¶è¿ŸèŒƒå›´ï¼ˆå•ä½ï¼šç§’ï¼‰
// ==========================================
var minDelay = 100;  // æœ€å°å»¶è¿Ÿ 100 ç§’
var maxDelay = 600;  // æœ€å¤§å»¶è¿Ÿ 600 ç§’ï¼ˆå¯æ ¹æ®éœ€è¦å»¶é•¿è‡³å‡ ç™¾ç§’ï¼‰

// ==========================================
// 2. å‡½æ•°å°è£…
// ==========================================

// éšæœºå»¶è¿Ÿå‡½æ•°
function randomSleep(min, max) {
    var s = Math.floor(Math.random() * (max - min + 1) + min);
    log("â³ ä¸ºäº†æ¨¡æ‹ŸçœŸäººï¼Œéšæœºé™é»˜ç­‰å¾… " + s + " ç§’...");
    for (var i = s; i > 0; i--) {
        if (i % 5 == 0) log("...è¿˜å‰© " + i + " ç§’...");
        sleep(1000);
    }
}

// åä¸ºæœ€ç¨³åæ ‡æŒ‰å‹
function forcePress(obj, label) {
    if (obj) {
        var b = obj.bounds();
        var x = b.centerX();
        var y = b.centerY();
        log("ğŸ“ ç‚¹å‡» " + label + ": (" + x + "," + y + ")");
        press(x, y, 180);
        return true;
    }
    log("âŒ æœªæ‰¾åˆ°: " + label);
    return false;
}

// æ¯”ä¾‹ç›²ç‚¹æŒ‰å‹
function blindPress(xRate, yRate, label) {
    var w = device.width;
    var h = device.height;
    var x = Math.round(w * xRate);
    var y = Math.round(h * yRate);
    log("ğŸ¯ æ¯”ä¾‹å®šä½ [" + label + "]: (" + x + "," + y + ")");
    if (press(x, y, 200)) {
        return true;
    } else {
        log("âŒ ç‚¹å‡»å¤±è´¥");
        return false;
    }
}

// ==========================================
// 3. æ‰§è¡Œæµç¨‹
// ==========================================

// --- æ­¥éª¤ 1: å¯åŠ¨é£ä¹¦ ---
app.launchPackage("com.ss.android.lark");
log("ğŸ“± é£ä¹¦å·²æ‹‰èµ·ï¼Œå‡†å¤‡è¿›å…¥éšæœºæ½œä¼æœŸ...");

// --- æ­¥éª¤ 2: éšæœºå»¶è¿Ÿï¼ˆæ ¸å¿ƒæ–°å¢ï¼‰ ---
// åœ¨è¿›å…¥æ‰“å¡æ“ä½œå‰éšæœºç­‰ä¸€ä¼šå„¿ï¼Œé˜²æ­¢æ¯å¤©éƒ½åœ¨åŒä¸€åˆ†åŒä¸€ç§’æ‰“å¡
sleep(5000)
//randomSleep(minDelay, maxDelay);

// --- æ­¥éª¤ 3: å¯»æ‰¾æœºå™¨äºº ---
const robot = textMatches(/.*(å‡å‹¤|æ‰“å¡|æœºå™¨äºº).*/).findOne(5000);
if (robot) {
    forcePress(robot, "æœºå™¨äººå¤´åƒ/åå­—");
} else {
    log("âŒ æ¶ˆæ¯åˆ—è¡¨æ²¡æ‰¾åˆ°æœºå™¨äººï¼Œå°è¯•ç›´æ¥ä¸‹æ»‘æœç´¢...");
}

// --- æ­¥éª¤ 4: ä¸‹æ»‘åˆ°åº•éƒ¨å¯»æ‰¾æœ€æ–°çš„æ‰“å¡å¡ç‰‡ ---
log("æ­£åœ¨ä¸‹æ»‘å¯»æ‰¾æœ€æ–°çš„æ‰“å¡æé†’...");
for (var i = 0; i < 5; i++) {
    swipe(500, 1500, 500, 500, 400);
    sleep(200);
}
sleep(1000);

/**
 * ğŸ’¡ é€»è¾‘æé†’ï¼š
 * æ­¤æ—¶ä½ åº”è¯¥å·²ç»åœ¨èŠå¤©çª—å£é‡Œäº†ã€‚
 * ä½ çš„ blindPress(0.5, 0.8) åº”è¯¥æ˜¯ä¸ºäº†ç‚¹å‡»æ¶ˆæ¯å¡ç‰‡é‡Œçš„â€œå»æ‰“å¡â€ã€‚
 */

// å°è¯•ç‚¹å‡»å¡ç‰‡ä¸Šçš„â€œå»æ‰“å¡â€ä½ç½® (æ ¹æ®ä½ ä¹‹å‰çš„æ¯”ä¾‹)
blindPress(0.5, 0.8, "æ¶ˆæ¯å¡ç‰‡-å»æ‰“å¡æŒ‰é’®");

log("ğŸš€ æ­£åœ¨çªå…¥æ‰“å¡æ ¸å¿ƒé¡µï¼Œç­‰å¾…ç½‘é¡µåŠ è½½...");
sleep(5000); // ç»™ WebView ç½‘é¡µåŠ è½½ç•™å‡ºå……è¶³æ—¶é—´

// --- æ­¥éª¤ 5: æœ€ç»ˆç›²ç‚¹æ‰“å‡»ï¼ˆæ‰“å¡åœ†ç›˜ï¼‰ ---
// é£ä¹¦æ‰“å¡è“åœˆé€šå¸¸åœ¨å±å¹• 60% çš„é«˜åº¦
blindPress(0.5, 0.6, "æœ€ç»ˆæ‰“å¡å¤§åœ†ç›˜æŒ‰é’®");

log("âœ… æ‰“å‡»æŒ‡ä»¤å‘é€å®Œæ¯•ï¼Œç­‰å¾…ç»“æœç¡®è®¤...");
sleep(5000);

// --- æ­¥éª¤ 6: æ£€æŸ¥æ˜¯å¦çœŸçš„æˆåŠŸäº† ---
if (textMatches(/.*(æˆåŠŸ|æ­£å¸¸|æ›´æ–°æ‰“å¡|æ‰“å¡æ—¶é—´).*/).exists()) {
    log("ğŸŠ æ­å–œï¼æ£€æµ‹åˆ°æ‰“å¡æˆåŠŸè¿¹è±¡ã€‚");
} else {
    log("âš ï¸ æ²¡çœ‹åˆ°æˆåŠŸæç¤ºï¼Œè¯·æ‰‹åŠ¨æ£€æŸ¥ã€‚");
}

log("ç¨‹åºæ‰§è¡Œç»“æŸï¼Œè¿”å›æ¡Œé¢");
sleep(1000);
home();